let canvas=document.querySelector("#canvas"),ctx=canvas.getContext("2d"),score=0,lives=3,rectPos=425,y=50,click=!1,blocks=[[30,270,510,750],[150,390,630,870],[30,150,270,390,510,630,750,870],[30,150,270,390,510,630,750,870]],ball={x:497,y:535,xSpeed:-8,ySpeed:-8},drawScore=l=>{ctx.font="20px Courier",ctx.fillStyle="DodgerBlue",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("score: "+l,10,5)},drawLives=l=>{ctx.font="20px Courier",ctx.fillStyle="DodgerBlue",ctx.textAlign="left",ctx.textBaseline="top",ctx.fillText("lives: "+l,890,5)},drawRect=l=>{ctx.fillStyle="DodgerBlue",ctx.fillRect(l,550,150,20)},drawBall=l=>{ctx.beginPath(),ctx.arc(l.x,l.y,15,0,2*Math.PI,!0),ctx.fill()},drawBlocks=l=>{l.forEach((e,c)=>{l[c].forEach(l=>{0==l||(ctx.fillStyle="DodgerBlue",ctx.fillRect(l,y,100,50))}),y+=70}),y=50},interval=setInterval((function(){ctx.clearRect(0,0,1e3,600),drawScore(score),drawLives(lives),drawBlocks(blocks),drawRect(rectPos),drawBall(ball),click&&(ball.x+=ball.xSpeed,ball.y+=ball.ySpeed),(ball.x>1e3||ball.x<0)&&(ball.xSpeed*=-1),(ball.y>600||ball.y<0)&&(ball.ySpeed*=-1),ball.y>=550&&ball.y<=551&&ball.x>=rectPos&&ball.x<=rectPos+150?(ball.ySpeed*=-1,ball.xSpeed*=1):ball.y>=570&&(ball.x=497,ball.y=535,click=!1,rectPos=425,lives-=1),0==lives&&(confirm("You lose")&&(clearInterval(interval),window.location.reload()),clearInterval(interval)),24==score&&(confirm("You won")&&(clearInterval(interval),window.location.reload()),clearInterval(interval)),blocks.forEach((l,e)=>{blocks[e].forEach((l,c)=>{0!=l&&ball.y>=y&&ball.y<=y+50&&ball.x>=l&&ball.x<=l+100&&(ball.ySpeed*=-1,ball.xSpeed*=1,blocks[e][c]=!1,score++)}),y+=70}),y=50}),20);canvas.addEventListener("mousemove",l=>{rectPos=l.screenX-500,rectPos<0&&(rectPos=0),rectPos>850&&(rectPos=850),click||(ball.x=l.screenX-425,rectPos<=0&&(ball.x=75),rectPos>=850&&(ball.x=925))}),canvas.addEventListener("click",l=>{click=!0});